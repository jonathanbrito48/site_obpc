{% extends 'shared/base.html' %}
{% load static %}
{% block content %}
    <section class="section_carrosel">
        <div class="carousel-container">
            <div class="slick-carousel">
                {% for banner in carrosel %}
                <div>
                    {% if banner.link_pagina %}
                    <a href="{{banner.link_pagina}}"><img src="{{banner.imagem.url}}" class="foto_carrosel" alt="{{banner.nome_imagem}}"></a>
                    {% else %}
                    <img src="{{banner.imagem.url}}" class="foto_carrosel" alt="{{banner.nome_imagem}}">
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            <button class="slick-prev" aria-label="Anterior" role="button" tabindex="0"></button>
            <button class="slick-next" aria-label="Próximo" role="button" tabindex="0"></button>
        </div>
    </section>
    <script>
        $(document).ready(function(){
            $('.slick-carousel').slick({
                dots: true,
                infinite: true,
                speed: 500,
                slidesToShow: 1,
                slidesToScroll: 1,
                autoplay: true,         // Ativa o modo de reprodução automática
                autoplaySpeed: 5000,    // Define o intervalo de tempo em milissegundos entre os slides
                responsive: [
                    {
                        breakpoint: 768, // Define o breakpoint desejado
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1,
                            infinite: true,
                            dots: true,
                            adaptiveHeight: true, // Isso ajustará automaticamente a altura conforme a largura
                        }
                    }
                    // Adicione mais blocos responsive conforme necessário para outros breakpoints
                ]
            });
        });
    </script>
    <div class="div_cultos">
        <div>
            <span><h2 class="line_programacao"><strong>Programação Semanal</strong></h2></span>
            <span class="programacao_subtitulo"><strong>Domingo</strong></span>
            <span>08h - Consagração
                09h - (1º e 3º domingo do mês) Café com Umasbrac
                10h - Encontro com Jubrac/Adobrac
                18h - Culto da Família
            </span>
            <span class="programacao_subtitulo"><strong>Terça-Feira</strong></span>
            <span>20h - Culto de Ensino</span>
            <span class="programacao_subtitulo"><strong>Quinta-feira</strong></span>
            <span>20h - Culto da Vitória</span>
            <span class="programacao_subtitulo"><strong>Sábado</strong></span>
            <span>09h - Encontro com Ufebrac</span>
            <span class="programacao_subtitulo"><strong>Manhãs de benção</strong></span>
            <span>De Segunda a Sexta, das 09h às 10h,
                Quarta das 09h30 às 11h
            </span>
            
            
        </div>
        <div class="div_img_cultos">
            <img class="img_cultos" src="{% static 'assets/cultos.jpg' %}" alt="CULTOS_IMG">
        </div>
    </div>
    {% if ministerios %}
    <div class="index_titulos">
        <h1 >Ministérios</h1>
    </div>
    {% endif %}
    <section class="secao_ministerios">
        {% for ministerio in ministerios %}
        <div class="div_ministerios_index">
            <div class="card_ministerio_index">
                <img class="card_ministerio_index_imagem" src="{{ministerio.card_ministerio.url}}" alt="card_ministerio_index">
            </div>
            <a class="card_ministerio_index_ancora" href="{% url 'ministerio' ministerio.nome_ministerio %}"><h3 class="card_ministerio_index_titulo">{{ministerio.nome_ministerio}}</h3></a>

        </div>
        {% endfor %}
    </section>
    {% for banner_devocional in devocional %}
        <div>
            <img class="banner_devocional" src="{{banner_devocional.banner_home.url}}" alt="banner">
            <div class="devocional_div">
                <h2>{{banner_devocional.titulo_devocional}}</h2>
                <p>{{banner_devocional.texto_devocional | truncatewords:170}}</p>
                <a href="{% url 'devocional_detalhe' banner_devocional.id %}"><strong>Ler Mais</strong></a>
            </div>
        </div>
    {% endfor %}
    <div class="evento_div">
        <div class="index_titulos">
            <h1>Eventos</h1>
        </div>
        <div class="div_cards_eventos">
            {% for card in evento  %}
            <div class="card_evento_eventos">
                <a href="{% url 'evento_detalhe' card.id %}">
                    <img src="{{card.foto_card_evento.url}}" class="foto_agenda_eventos" alt="fora-da-caixa">
                </a>
                <div class="card_alinhamento">
                    {% if  card.data_fim %}
                    <p class="data_evento">{{card.data_inicio|date:'d'}} a {{card.data_fim}}</p>
                    {% else %}
                    <p class="data_evento">{{card.data_inicio}}</p> 
                    {% endif %}   
                    <H2>{{card.nome_evento}}</H2>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="div_botao_ver_mais_eventos">
            <a class="botao_ver_mais_eventos" href="{% url 'eventos' %}">
                <strong>Ver mais</strong>
            </a>
        </div>
    </div>
    <section class="congregacao">
        <h1>Congregações</h1>
        <section class="section_congregacoes_index">
            <button class="prev" id="prevButton">&#10094;</button>
            <div class="carousel">
                {% for congregacao in congregacoes %}
                <div class="slide">
                    <h2>{{congregacao.nome_congregacao}}</h2>
                    <h3>{{congregacao.dirigente}}</h3>
                    <strong><p>{{congregacao.cultos}}</p></strong>
                    <p>{{congregacao.endereco}}</p>
                    <section class="div_icons_congregacao">
                        {% if congregacao.instagram %}
                        <a href="https://www.instagram.com/{{congregacao.instagram}}/"><img src="{% static '/assets/instagram.png' %}" class="icone_cong" alt="logo_insta"></a>
                        {% endif %}
                        {% if congregacao.facebook %}
                        <a href="https://www.facebook.com/{{congregacao.facebook}}/"><img src="{% static '/assets/facebook.png' %}" class="icone_cong" alt="logo_face"></a>
                        {% endif %}
                        {% if congregacao.link_maps %}
                        <a href="{{congregacao.link_maps}}"><img src="{% static '/assets/mapas-do-google.png' %}" class="icone_cong" alt="logo_face"></a>
                        {% endif %}
                    </section>
                </div>
                {% endfor %}
            </div>
            <button class="next" id="nextButton">&#10095;</button>
        </section>
    </section>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const carousel = document.querySelector('.carousel');
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            let isDragging = false;
            let startX;
            let scrollLeft;
            let movementFactor = 1.5; // Ajuste para aumentar a sensibilidade do arrasto
    
            // Função para rolar para a esquerda (com botão)
            function scrollLeftButton() {
                carousel.scrollBy({
                    left: -300, // Valor fixo para os botões
                    behavior: 'smooth'
                });
            }
    
            // Função para rolar para a direita (com botão)
            function scrollRightButton() {
                carousel.scrollBy({
                    left: 300, // Valor fixo para os botões
                    behavior: 'smooth'
                });
            }
    
            // Event listeners para os botões
            prevButton.addEventListener('click', scrollLeftButton);
            nextButton.addEventListener('click', scrollRightButton);
    
            // Iniciar o arrasto com o mouse
            carousel.addEventListener('mousedown', (e) => {
                isDragging = true;
                startX = e.pageX - carousel.offsetLeft; // Posição inicial do clique
                scrollLeft = carousel.scrollLeft; // Posição atual do scroll
                carousel.classList.add('dragging');
            });
    
            // Detectar o movimento do mouse em tempo real
            carousel.addEventListener('mousemove', (e) => {
                if (!isDragging) return; // Só mover se estiver arrastando
                e.preventDefault(); // Prevenir seleção de texto
                const x = e.pageX - carousel.offsetLeft; // Posição atual do mouse
                const walk = (x - startX) * movementFactor; // Multiplicar pelo fator de movimento
                carousel.scrollLeft = scrollLeft - walk; // Atualiza a posição do scroll
            });
    
            // Finalizar o arrasto com o mouse
            document.addEventListener('mouseup', () => {
                isDragging = false;
                carousel.classList.remove('dragging');
            });
    
            // Finalizar o arrasto ao sair da área
            carousel.addEventListener('mouseleave', () => {
                isDragging = false;
                carousel.classList.remove('dragging');
            });
    
            // Iniciar o arrasto em dispositivos móveis (toque)
            carousel.addEventListener('touchstart', (e) => {
                isDragging = true;
                startX = e.touches[0].pageX - carousel.offsetLeft; // Posição inicial do toque
                scrollLeft = carousel.scrollLeft; // Posição atual do scroll
                carousel.classList.add('dragging');
            });
    
            // Detectar o movimento do toque em tempo real
            carousel.addEventListener('touchmove', (e) => {
                if (!isDragging) return; // Só mover se estiver arrastando
                const x = e.touches[0].pageX - carousel.offsetLeft; // Posição atual do toque
                const walk = (x - startX) * movementFactor; // Multiplicar pelo fator de movimento
                carousel.scrollLeft = scrollLeft - walk; // Atualiza a posição do scroll
            });
    
            // Finalizar o arrasto no toque
            carousel.addEventListener('touchend', () => {
                isDragging = false;
                carousel.classList.remove('dragging');
            });
        });
    </script>    
    
    <div class="instagram">
        <script src="https://cdn.commoninja.com/sdk/latest/commonninja.js" defer></script>
        <div class="commonninja_component pid-08209d49-62a9-4497-8f7d-cc048d7c7b62"></div>
    </div>
{% endblock %}